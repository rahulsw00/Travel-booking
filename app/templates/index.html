{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Travel Booking</title>
    <link rel="stylesheet" href="{% static 'style.css' %}" />
    <link
      href="https://cdn.boxicons.com/fonts/basic/boxicons.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-400">
    <!--header-->
    <div
      class="flex flex-col sm:flex-row bg-blue-400 py-5 px-8 items-center justify-between"
    >
      <p class="font-semibold text-2xl">LOGO</p>
      {% if user.is_authenticated %}
      <a href="{% url 'profile' %}" class="bg-white py-2 px-4 rounded"
        >PROFILE</a
      >
      {% else %}
      <a href="{% url 'login' %}" class="bg-white py-2 px-4 rounded">LOGIN</a>
      {% endif %}
    </div>

    <!--booking pop up-->

    <!--select source, destination and mode of transport-->
    <form
      method="post"
      class="flex flex-col sm:flex-row md:gap-10 lg:gap-20 bg-white justify-center py-2 items-center"
    >
      {% csrf_token %}
      <div>
        <label for="sourceCities">From:</label>
        <select
          name="sourceCities"
          id="sourceCities"
          class="bg-gray-400 py-1 px-2 rounded"
        >
          <option value="0" selected>select</option>
          {% for city in cities %}
          <option value="{{city.id}}">{{city.name}}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label for="destinationCities">To:</label>
        <select
          name="destinationCities"
          id="destinationCities"
          class="bg-gray-400 py-1 px-2 rounded"
        >
          <option value="0" selected>select</option>
          {% for city in cities %}
          <option value="{{city.id}}">{{city.name}}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label for="modeOfTransport">Mode:</label>
        <select
          name="modeOfTransport"
          id="modeOfTransport"
          class="bg-gray-400 py-1 px-2 rounded"
        >
          <option value="All" selected>All</option>
          <option value="Flight">Flight</option>
          <option value="Train">Train</option>
          <option value="Bus">Bus</option>
        </select>
      </div>

      <button class="bg-blue-400 py-2 px-4 rounded">Search</button>
    </form>

    <!-- travel options -->
    <div class="flex flex-row justify-center mt-3 flex-wrap gap-2">
      <!-- prettier-ignore -->
      {% for option in availableOptions %}
      <div class="flex flex-row justify-between bg-white w-sm rounded-xl p-3">
        <div class="flex flex-col w-75 justify-between">
          <div>
            <p class="text-2xl">
              {{option.source.name}} to {{option.destination.name}}
            </p>
            <p>Seats Available: {{option.availableSeats}}</p>
          </div>
          <p class="">
            <b>Date:</b> {{option.dateTime|date:'Y-m-d'}} <b>Time:</b>
            {{option.dateTime|time:'h:i A'}}
          </p>
        </div>
        <div class="flex flex-col w-25 justify-between">
          <div class="flex flex-row items-center">
            {% if option.travelType == "Bus" %}
            <i class="bxr bx-bus pr-1 text-red-500"></i>
            {% endif %} {% if option.travelType == "Train" %}
            <i class="bxr bx-train pr-1 text-red-500"></i>
            {% endif %} {% if option.travelType == "Flight" %}
            <i class="bxr bx-plane-alt pr-1 text-red-500"></i>
            {% endif %}
            <p class="">{{option.travelType}}</p>
          </div>
          <div class="flex flex-row items-center">
            <i class="bxr bx-rupee text-green-600"></i>
            <p class="">{{option.price}}</p>
          </div>
          <a
            href="{% url 'book' option.id %}"
            class="bg-blue-400 px-3 py-2 rounded text-center"
            >Book</a
          >
        </div>
      </div>
      {% endfor %}
    </div>
  </body>
</html>
