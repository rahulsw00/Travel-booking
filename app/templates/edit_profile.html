{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'style.css' %}" />
    <title>Edit Profile</title>
  </head>
  <body class="flex bg-gray-400 items-center justify-center min-h-screen py-8">
    <div class="w-full max-w-2xl bg-white shadow-lg rounded-lg p-8">
      <h2 class="text-2xl font-bold text-center mb-6">Edit Profile</h2>

      <!-- Personal Information Section -->
      <div class="mb-8">
        <h3 class="text-lg font-semibold mb-4 text-gray-700 border-b pb-2">
          Personal Information
        </h3>
        <form method="post" class="flex flex-col bg-white rounded gap-4">
          {% csrf_token %}
          <div class="flex flex-row gap-2">
            <div class="flex-1">
              <label
                for="id_first_name"
                class="block text-sm font-medium text-gray-700 mb-1"
                >First Name</label
              >
              <input
                type="text"
                name="first_name"
                id="id_first_name"
                value="{{ form.first_name.value|default:'' }}"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="{{user.first_name}}"
              />
              {% if form.first_name.errors %}
              <p class="text-red-500 text-sm mt-1">
                {{ form.first_name.errors.0 }}
              </p>
              {% endif %}
            </div>
            <div class="flex-1">
              <label
                for="id_last_name"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Last Name</label
              >
              <input
                type="text"
                name="last_name"
                id="id_last_name"
                value="{{ form.last_name.value|default:'' }}"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="{{user.last_name}}"
              />
              {% if form.last_name.errors %}
              <p class="text-red-500 text-sm mt-1">
                {{ form.last_name.errors.0 }}
              </p>
              {% endif %}
            </div>
          </div>
          <div>
            <label
              for="id_email"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Email</label
            >
            <input
              type="email"
              name="email"
              id="id_email"
              value="{{ form.email.value|default:'' }}"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="{{user.email}}"
            />
            {% if form.email.errors %}
            <p class="text-red-500 text-sm mt-1">{{ form.email.errors.0 }}</p>
            {% endif %}
          </div>
          <div>
            <label
              for="id_username"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Username</label
            >
            <input
              type="text"
              name="username"
              id="id_username"
              value="{{ form.username.value|default:'' }}"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="{{user.username}}"
            />
            {% if form.username.errors %}
            <p class="text-red-500 text-sm mt-1">
              {{ form.username.errors.0 }}
            </p>
            {% endif %}
          </div>
          <div class="flex justify-end">
            <button
              type="submit"
              name="update_info"
              class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition duration-200"
            >
              Update Information
            </button>
          </div>
        </form>
      </div>

      <!-- Change Password Section -->
      <div class="mb-8">
        <h3 class="text-lg font-semibold mb-4 text-gray-700 border-b pb-2">
          Change Password
        </h3>
        <form method="post" class="flex flex-col bg-white rounded gap-4">
          {% csrf_token %}
          <div>
            <label
              for="id_current_password"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Current Password</label
            >
            <input
              type="password"
              name="current_password"
              id="id_current_password"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            {% if password_form.current_password.errors %}
            <p class="text-red-500 text-sm mt-1">
              {{ password_form.current_password.errors.0 }}
            </p>
            {% endif %}
          </div>
          <div class="flex flex-row gap-2">
            <div class="flex-1">
              <label
                for="id_new_password1"
                class="block text-sm font-medium text-gray-700 mb-1"
                >New Password</label
              >
              <input
                type="password"
                name="new_password1"
                id="id_new_password1"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              {% if password_form.new_password1.errors %}
              <p class="text-red-500 text-sm mt-1">
                {{ password_form.new_password1.errors.0 }}
              </p>
              {% endif %}
            </div>
            <div class="flex-1">
              <label
                for="id_new_password2"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Confirm New Password</label
              >
              <input
                type="password"
                name="new_password2"
                id="id_new_password2"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              {% if password_form.new_password2.errors %}
              <p class="text-red-500 text-sm mt-1">
                {{ password_form.new_password2.errors.0 }}
              </p>
              {% endif %}
            </div>
          </div>
          <div class="flex justify-end">
            <button
              type="submit"
              name="change_password"
              class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition duration-200"
            >
              Change Password
            </button>
          </div>
        </form>
      </div>

      <!-- Reset Password Section -->
      <div class="mb-6">
        <h3 class="text-lg font-semibold mb-4 text-gray-700 border-b pb-2">
          Reset Password
        </h3>
        <div class="bg-gray-50 p-4 rounded-lg">
          <p class="text-sm text-gray-600 mb-3">
            If you've forgotten your password or want to reset it via email,
            click the button below.
          </p>
          <a
            href="{% url 'password_reset' %}"
            class="inline-block bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg transition duration-200"
          >
            Send Reset Email
          </a>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex justify-between items-center pt-4 border-t">
        <a
          href="{% url 'profile' %}"
          class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition duration-200"
        >
          Cancel
        </a>
        <div class="text-sm text-gray-500">
          Last updated: {{ user.date_joined|date:"M d, Y" }}
        </div>
      </div>
    </div>
  </body>
</html>
